"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8601],{1321(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"api-integration","title":"API Integration","description":"Orange Absence provides a robust API for external integrations and the mobile portal.","source":"@site/docs/api-integration.md","sourceDirName":".","slug":"/api-integration","permalink":"/orange-absence/docs/api-integration","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Finances & Cash Logs","permalink":"/orange-absence/docs/finances"}}');var r=t(4848),s=t(8453);const l={},o="API Integration",d={},c=[{value:"Authentication Guide",id:"authentication-guide",level:2},{value:"For Mobile Portal",id:"for-mobile-portal",level:3},{value:"Core Endpoints",id:"core-endpoints",level:2},{value:"Documentation as Code",id:"documentation-as-code",level:2},{value:"View Interactive Swagger UI",id:"view-interactive-swagger-ui",level:3},{value:"Error Handling",id:"error-handling",level:2}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"api-integration",children:"API Integration"})}),"\n",(0,r.jsx)(n.p,{children:"Orange Absence provides a robust API for external integrations and the mobile portal."}),"\n",(0,r.jsx)(n.h2,{id:"authentication-guide",children:"Authentication Guide"}),"\n",(0,r.jsx)(n.p,{children:"API requests require session-based or token-based authentication depending on the client."}),"\n",(0,r.jsx)(n.h3,{id:"for-mobile-portal",children:"For Mobile Portal"}),"\n",(0,r.jsx)(n.p,{children:"The mobile portal uses Laravel Sanctum's stateful cookie authentication."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /sanctum/csrf-cookie"})," (initialize session)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /login"})," (submit credentials)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"core-endpoints",children:"Core Endpoints"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Endpoint"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"GET"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"/portal"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Fetch user dashboard and active schedules."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"POST"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"/attendance/scan"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Submit QR payload and GPS coordinates."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"GET"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"/member/payments"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Fetch personal financial history."})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"documentation-as-code",children:"Documentation as Code"}),"\n",(0,r.jsxs)(n.p,{children:["We use ",(0,r.jsx)(n.code,{children:"L5-Swagger"})," (OpenAPI 3.0). The documentation is generated directly from ",(0,r.jsx)(n.strong,{children:"PHP Attributes"})," in the Controllers."]}),"\n",(0,r.jsx)(n.h3,{id:"view-interactive-swagger-ui",children:"View Interactive Swagger UI"}),"\n",(0,r.jsx)(n.p,{children:"You can access the interactive documentation on your local development server:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["URL: ",(0,r.jsx)(n.code,{children:"http://localhost:8000/api/documentation"})]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Advice: Integration Security",type:"tip",children:(0,r.jsxs)(n.p,{children:["Never expose your ",(0,r.jsx)(n.code,{children:"APP_KEY"})," or ",(0,r.jsx)(n.code,{children:"JWT_SECRET"}),". External apps should use a dedicated Service Account with limited permissions."]})}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.p,{children:"The API returns standard HTTP status codes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"200"}),": Success"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"401"}),": Unauthorized (Login required)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"403"}),": Forbidden (e.g., Geofence failed)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"422"}),": Validation Error (e.g., Missing GPS data)"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,t){t.d(n,{R:()=>l,x:()=>o});var i=t(6540);const r={},s=i.createContext(r);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);